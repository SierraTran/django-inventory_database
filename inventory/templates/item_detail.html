{% extends "inventory_base_template.html" %}
{% load static %}

{% block other_stylesheets %}
    <link rel="stylesheet" href="{% static "item_detail.css" %}" />
{% endblock other_stylesheets %}

{% block title %} {{ item }} | Inventory Database {% endblock title %}

{% block page-title %} {{ item }} {% endblock page-title %}

{% block content %}

{% if item %}
    <table>
        <tr>
            <th>Manufacturer</th><td>{{ item.manufacturer }}</td>
        </tr>
        <tr>
            <th>Model</th><td>{{ item.model }}</td>
        </tr>
        <tr>
            <th>Part or Unit?</th><td>{{ item.part_or_unit }}</td>
        </tr>
        <tr>
            <th>Part Number</th><td>{{ item.part_number }}</td>
        </tr>
        <tr class="description">
            <th>Description</th><td>{{ item.description }}</td>
        </tr>
        <tr>
            <th>Location</th><td>{{ item.location }}</td>
        </tr>
        <tr {% if item.low_stock %} style="color: red;" title="This item is low in stock."{% endif %}>
            <th>Quantity</th><td>{{ item.quantity }}</td>
        </tr>
        <tr>
            <th>Price</th><td>{{ item.price }}</td>
        </tr>
    </table>
{% else %}
    No details are available.
{% endif %}

{% comment %} 
    The user group "viewer" is the lowest group in the hierarchy. 
    Viewers can only go back on the item-details page. 

    Since users must be logged in to see this page, we're going to assume they  
    at least have viewer permissions and allow the "back" button to be shown on 
    the page automatically.
{% endcomment %}
 <div class="buttons set1">
    <button type="button" id="back" onclick="window.location.href='{% url "inventory:items" %}';">
        Back
    </button>
    {% if user_group.name != None and user_group.name != 'Viewer' %}
    {% if user_group.name == 'Technician' %} {# The current user is a Technician #}
    <button type="button" id="update" onclick="window.location.href='{% url 'inventory:item_update_form' item.id %}';">
    {% else %} {# The current user is a Intern #}
    <button type="button" id="update" onclick="window.location.href='{% url 'inventory:item_quantity_update_form' item.id %}';">
    {% endif %}    
        Update
    </button>
    {% endif %}
</div>
{% comment %} {% if user_group.name != None and user_group.name != 'Viewer' and user_group.name != 'Intern' %} {% endcomment %}

{# Technician / Superuser only buttons #}
{% if user_group.name == 'Technician' or user_group.name == 'Superuser' %}
<div class="buttons set2">
    <button type="button" id="use">Use (Coming Soon)</button>
    {# Technicians REQUEST more. Superusers ORDER more. #}
    {% if user_group.name == 'Superuser' %}
    <button type="button" id="order-more">Order More (Coming Soon)</button>
    {% else %}
    <button type="button" id="order-more">Request More (Coming Soon)</button>
    {% endif %}
</div>
{% endif %} 

{% endblock content %}
